<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layouts::header}">
<title>Project Management</title>
</head>
<body>
	<nav th:replace="~{layouts::navbar}"></nav>

	<div class="container mt-4">
		<h3 class="text-center">Main Dashboard</h3>
		<p class="text-muted text-center">
			Version: <span th:text="${versionNumber}"></span>
		</p>
		<hr>

		<div class="row">
			<div class="col-md-8">
				<h4 class="mb-3">Current Projects</h4>
				<div class="table-responsive">
					<table class="table table-bordered table-striped">
						<thead class="thead-dark">
							<tr>
								<th>Project Name</th>
								<th>Project Stage</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="aProject : ${projects}">
								<td th:text="${aProject.name}"></td>
								<td th:text="${aProject.stage}"></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

			<div class="col-md-4 text-center">
				<h4 class="mb-3">Project Status</h4>
				<canvas id="myPieChart" class="mb-4" width="100" height="100"></canvas>
				<script>
					var chartData = "[[${projectStatusCnt}]]";
				</script>
			</div>
		</div>

		<hr class="my-4">

		<div class="row">
			<div class="col-md-12">
				<h4 class="mb-3">Current Employees</h4>
				<div class="table-responsive">
					<table class="table table-bordered table-striped">
						<thead class="thead-dark">
							<tr>
								<th>First Name</th>
								<th>Last Name</th>
								<th>Project Count</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="anEmployeeProjectCnt : ${employeesListProjectCnt}">
								<td th:text="${anEmployeeProjectCnt.firstName}"></td>
								<td th:text="${anEmployeeProjectCnt.lastName}"></td>
								<td th:text="${anEmployeeProjectCnt.projectCount}"></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

	</div>

	<!-- JavaScript Files -->
	<script type="text/javascript" th:src="@{js/myChart.js}"></script>
</body>
</html>
